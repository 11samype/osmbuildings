var OSMBuildings=function(){function d(a,b){var e=a[0]-b[0],f=a[1]-b[1];return e*e+f*f}function E(a){var b,e,f,c,d=0,g,t;g=0;for(t=a.length-3;g<t;g+=2)b=a[g],e=a[g+1],f=a[g+2],c=a[g+3],d+=b*c-f*e;if("CW"===(0<d/2?"CW":"CCW"))return a;b=[];for(e=a.length-2;0<=e;e-=2)b.push(a[e],a[e+1]);return b}var la=la||Array,ma=ma||Array,j=Math,Aa=j.exp,Ba=j.log,Ca=j.sin,Da=j.cos,ia=j.tan,Ea=j.atan,T=j.min,X=j.max,na=document,Q,oa=function(a){var b,e,f;if(0===a.s)b=e=f=a.l;else{f=0.5>a.l?a.l*(1+a.s):a.l+a.s-a.l*
a.s;var c=2*a.l-f;a.h/=360;b=R(c,f,a.h+1/3);e=R(c,f,a.h);f=R(c,f,a.h-1/3)}return new C(255*b<<0,255*e<<0,255*f<<0,a.a)},R=function(a,b,e){0>e&&(e+=1);1<e&&(e-=1);return e<1/6?a+6*(b-a)*e:0.5>e?b:e<2/3?a+6*(b-a)*(2/3-e):a},C=function(a,b,e,f){this.r=a;this.g=b;this.b=e;this.a=4>arguments.length?1:f},j=C.prototype;j.toString=function(){return"rgba("+[this.r<<0,this.g<<0,this.b<<0,this.a.toFixed(2)].join()+")"};j.adjustLightness=function(a){var b=C.toHSLA(this);b.l*=a;b.l=Math.min(1,Math.max(0,b.l));
return oa(b)};j.adjustAlpha=function(a){return new C(this.r,this.g,this.b,this.a*a)};C.parse=function(a){var b;a+="";if(~a.indexOf("#"))return b=a.match(/^#?(\w{2})(\w{2})(\w{2})(\w{2})?$/),new C(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),b[4]?parseInt(b[4],16)/255:1);if(b=a.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/))return new C(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),b[4]?parseFloat(b[5]):1);if(b=a.match(/hsla?\(([\d.]+)\D+([\d.]+)\D+([\d.]+)(\D+([\d.]+))?\)/))return oa({h:parseInt(b[1],
10),s:parseFloat(b[2]),l:parseFloat(b[3]),a:b[4]?parseFloat(b[5]):1})};C.toHSLA=function(a){var b=a.r/255,e=a.g/255,f=a.b/255,c=Math.max(b,e,f),d=Math.min(b,e,f),g,t=(c+d)/2,j;if(c===d)g=d=0;else{j=c-d;d=0.5<t?j/(2-c-d):j/(c+d);switch(c){case b:g=(e-f)/j+(e<f?6:0);break;case e:g=(f-b)/j+2;break;case f:g=(b-e)/j+4}g/=6}return{h:360*g,s:d,l:t,a:a.a}};Q=C;var pa,j=Math,w=j.sin,y=j.cos,Fa=j.tan,qa=j.asin,ra=j.atan2,U=j.PI,A=180/U,Ga=357.5291/A,Ha=0.98560028/A,Ia=1.9148/A,Ja=0.02/A,Ka=3E-4/A,La=102.9372/
A,sa=23.45/A,Ma=280.16/A,Na=360.9856235/A;pa=function(a,b,e){e=-e/A;b/=A;a=a.valueOf()/864E5-0.5+2440588;var d=Ga+Ha*(a-2451545),c=Ia*w(d)+Ja*w(2*d)+Ka*w(3*d),c=d+La+c+U,d=qa(w(c)*w(sa)),c=ra(w(c)*y(sa),y(c));e=Ma+Na*(a-2451545)-e-c;return{altitude:qa(w(b)*w(d)+y(b)*y(d)*y(e)),azimuth:ra(w(e),y(e)*w(b)-Fa(d)*y(b))-U/2}};var ta,M=function(a){var b=parseFloat(a);return~a.indexOf("m")?b<<0:~a.indexOf("yd")?b*Oa<<0:~a.indexOf("ft")?b*ua<<0:~a.indexOf("'")?(a=a.split("'"),a[0]*ua+a[1]*Pa<<0):b<<0},u=function(a){a=
a.toLowerCase();return"#"===a[0]?a:Qa[a]||null},x=function(a){a=a.toLowerCase();return"#"===a[0]?a:Ra[Sa[a]||a]||null},va=function(a){return(a=a.tags)&&!a.landuse&&(a.building||a["building:part"])&&(!a.layer||0<=a.layer)},wa=function(a){if(a){for(var b=[],e,d=0,c=a.length;d<c;d++)e=N[a[d]],b.push(e[0],e[1]);b[b.length-2]!==b[0]&&b[b.length-1]!==b[1]&&b.push(b[0],b[1]);if(!(8>b.length))return b}},ja=function(a){var b=0,d=0;a.height&&(b=M(a.height));!b&&a["building:height"]&&(b=M(a["building:height"]));
!b&&a.levels&&(b=a.levels*D<<0);!b&&a["building:levels"]&&(b=a["building:levels"]*D<<0);a.min_height&&(d=M(a.min_height));!d&&a["building:min_height"]&&(d=M(a["building:min_height"]));!d&&a.min_level&&(d=a.min_level*D<<0);!d&&a["building:min_level"]&&(d=a["building:min_level"]*D<<0);var f,c;a["building:material"]&&(f=x(a["building:material"]));a["building:facade:material"]&&(f=x(a["building:facade:material"]));a["building:cladding"]&&(f=x(a["building:cladding"]));a["building:color"]&&(f=u(a["building:color"]));
a["building:colour"]&&(f=u(a["building:colour"]));a["roof:material"]&&(c=x(a["roof:material"]));a["building:roof:material"]&&(c=x(a["building:roof:material"]));a["roof:color"]&&(c=u(a["roof:color"]));a["roof:colour"]&&(c=u(a["roof:colour"]));a["building:roof:color"]&&(c=u(a["building:roof:color"]));a["building:roof:colour"]&&(c=u(a["building:roof:colour"]));return{height:b,minHeight:d,wallColor:f,roofColor:c}},xa=function(a,b,d){a={id:a,footprint:E(d)};b.height&&(a.height=b.height);b.minHeight&&(a.minHeight=
b.minHeight);b.wallColor&&(a.wallColor=b.wallColor);b.roofColor&&(a.roofColor=b.roofColor);ka.push(a)},Oa=0.9144,ua=0.3048,Pa=0.0254,D=3,Qa={black:"#000000",white:"#ffffff",brown:"#8b4513",green:"#00ff7f",grey:"#bebebe",gray:"#bebebe",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",yellow:"#ffff00",red:"#ff0000",blue:"#0000ff"},Sa={asphalt:"tar_paper",bitumen:"tar_paper",block:"stone",bricks:"brick",glas:"glass",glassfront:"glass",grass:"plants",masonry:"stone",granite:"stone",panels:"panel",paving_stones:"stone",
plastered:"plaster",rooftiles:"roof_tiles",roofingfelt:"tar_paper",sandstone:"stone",sheet:"canvas",sheets:"canvas",shingle:"tar_paper",shingles:"tar_paper",slates:"slate",steel:"metal",tar:"tar_paper",tent:"canvas",thatch:"plants",tile:"roof_tiles",tiles:"roof_tiles"},Ra={brick:"#cc7755",bronze:"#ffeecc",canvas:"#fff8f0",concrete:"#999999",copper:"#a0e0d0",glass:"#e8f8f8",gold:"#ffcc00",plants:"#009933",metal:"#aaaaaa",panel:"#fff8f0",plaster:"#999999",roof_tiles:"#f08060",silver:"#cccccc",slate:"#666666",
stone:"#996666",tar_paper:"#333333",wood:"#deb887"},N,O,ka;ta=function(a){N={};O={};ka=[];for(var b,d=0,f=a.length;d<f;d++)switch(b=a[d],b.type){case "node":N[b.id]=[b.lat,b.lon];break;case "way":var c=void 0,j=void 0;va(b)?(c=ja(b.tags),(j=wa(b.nodes))&&xa(b.id,c,j)):(c=b.tags)&&(!c.highway&&!c.railway&&!c.landuse)&&(O[b.id]=b);break;case "relation":var g=c=c=void 0,j=void 0;if(va(b)&&("multipolygon"===b.tags.type||"building"===b.tags.type)){a:{for(var c=b.members,j=void 0,g=0,t=c.length;g<t;g++)if(j=
c[g],"way"===j.type&&"outer"===j.role){c=j;break a}c=void 0}if(c&&(b=ja(b.tags),c=O[c.ref]))if(g=ja(c.tags),j=wa(c.nodes)){t=void 0;for(t in b)g[t]||(g[t]=b[t]);xa(c.id,g,j)}}}N=O=null;return ka};var Y=Math.PI,ya=Y/2,Ta=Y/4,Ua=180/Y,Va=256,Z="latitude",$="longitude",j=function(){function a(a,b){var m={};a/=y;b/=y;m[Z]=0>=b?90:1<=b?-90:Ua*(2*Ea(Aa(Y*(1-2*b)))-ya);m[$]=360*(1===a?1:(a%1+1)%1)-180;return m}function b(a,b){var m=T(1,X(0,0.5-Ba(ia(Ta+ya*a/180))/Y/2));return{x:(b/360+0.5)*y<<0,y:m*y<<0}}
function e(a){H=a;y=Va<<H;a=H;var b=D,m=O;a=T(X(a,b),m);G=1-T(X(0+0.3*((a-b)/(m-b)),0),0.3);M=P.adjustAlpha(G)+"";aa=x.adjustAlpha(G)+"";ba=V.adjustAlpha(G)+"";z.scale(H)}function j(){ca.render();ga.render();c()}function c(){F.clearRect(0,0,t,B);if(!(H<D||da)){var a,b,m,ha,c,e,j,k,h,l=I,n=J,p=ga.getMaxHeight(),f=[ea+l,fa+n],q,r,s,v,S,w;z.rendering.sort(function(a,b){return d(b.center,f)/b.height-d(a.center,f)/a.height});a=0;for(b=z.rendering.length;a<b;a++)if(c=z.rendering[a],!(c.height<=p)){r=!1;
e=c.footprint;q=[];m=0;for(ha=e.length-1;m<ha;m+=2)q[m]=k=e[m]-l,q[m+1]=h=e[m+1]-n,r||(r=0<k&&k<t&&0<h&&h<B);if(r){m=c.isNew?c.height*K:c.height;e=W/(W-m);c.minHeight&&(m=c.isNew?c.minHeight*K:c.minHeight,j=W/(W-m));k=[];m=0;for(ha=q.length-3;m<ha;m+=2)h=q[m],s=q[m+1],r=q[m+2],v=q[m+3],S=g(h,s,e),w=g(r,v,e),c.minHeight&&(s=g(h,s,j),v=g(r,v,j),h=s.x,s=s.y,r=v.x,v=v.y),(r-h)*(S.y-s)>(S.x-h)*(v-s)&&(F.fillStyle=h<r&&s<v||h>r&&s>v?c.altColor||aa:c.wallColor||M,A([r,v,h,s,S.x,S.y,w.x,w.y])),k[m]=S.x,k[m+
1]=S.y;F.fillStyle=c.roofColor||ba;F.strokeStyle=c.altColor||aa;A(k,!0)}}}}function A(a,b){if(a.length){F.beginPath();F.moveTo(a[0],a[1]);for(var m=2,d=a.length;m<d;m+=2)F.lineTo(a[m],a[m+1]);F.closePath();b&&F.stroke();F.fill()}}function g(a,b,m){return{x:(a-ea)*m+ea<<0,y:(b-fa)*m+fa<<0}}var t=0,B=0,w=0,C=0,I=0,J=0,H,y,u,F,P=new Q(200,190,180),x=P.adjustLightness(0.8),V=P.adjustLightness(1.2),M=P+"",aa=x+"",ba=V+"",K=1,N,G=1,D=14,O=20,R,ea,fa,W,da,U={container:null,items:[],init:function(a){var b=
this.container=na.createElement("DIV");b.style.pointerEvents="none";b.style.position="absolute";b.style.left=0;b.style.top=0;ca.init(this.create());ga.init(this.create());F=this.create();a.appendChild(b);return b},create:function(){var a=na.createElement("CANVAS");a.style.webkitTransform="translate3d(0,0,0)";a.style.imageRendering="optimizeSpeed";a.style.position="absolute";a.style.left=0;a.style.top=0;var b=a.getContext("2d");b.lineCap="round";b.lineJoin="round";b.lineWidth=1;b.mozImageSmoothingEnabled=
!1;b.webkitImageSmoothingEnabled=!1;this.items.push(a);this.container.appendChild(a);return b},setSize:function(a,b){for(var m=this.items,d=0,c=m.length;d<c;d++)m[d].width=a,m[d].height=b}},z={url:"",raw:[],rendering:[],init:function(){},load:function(a){this.url=a;this.update()},update:function(){if(this.url&&!(14>H)){var b=a(I-w,J-C),d=a(I+t+w,J+B+C);u&&u.abort();var m={w:b[$],n:b[Z],e:d[$],s:d[Z]},b=this.url.replace(/\{ *([\w_]+) *\}/g,function(a,b){return m[b]||a}),c=this.set.bind(this),e=new XMLHttpRequest;
e.onreadystatechange=function(){4===e.readyState&&e.status&&!(200>e.status||299<e.status)&&e.responseText&&c(JSON.parse(e.responseText))};e.open("GET",b);e.send(null);u=e}},set:function(a){if(a){var b,d,e=this.raw,j={};b=0;for(d=e.length;b<d;b++)j[e[b].id]=1;if("FeatureCollection"===a.type){b=a.features;var f,za;a=[];var k,h,l,n,p,g,q,r;d=0;for(e=b.length;d<e;d++)if(k=b[d],"Feature"===k.type&&(h=k.geometry,k=k.properties,"LineString"===h.type&&(g=l.length-1,l[0][0]===l[g][0]&&l[0][1]===l[g][1]&&(l=
h.coordinates)),"Polygon"===h.type&&(l=h.coordinates),"MultiPolygon"===h.type&&(l=h.coordinates[0]),l)){if(k.color||k.wallColor)n=k.color||k.wallColor;k.roofColor&&(p=k.roofColor);h=l[0];r=[];q=k.height;f=g=0;for(za=h.length;f<za;f++)r.push(h[f][1],h[f][0]),g+=q||h[f][2]||0;f={id:k.id||r[0]+","+r[1],footprint:E(r)};g&&(f.height=g/h.length<<0);k.minHeight&&(f.minHeight=k.minHeight);n&&(f.wallColor=n);p&&(f.roofColor=p);a.push(f)}e=this.raw=a}else a.osm3s&&(e=this.raw=ta(a.elements));this.n=-90;this.w=
180;this.s=90;this.e=-180;b=0;for(d=e.length;b<d;b++){l=e[b];l.isNew=!j[l.id];l.wallColor&&(l.wallColor=Q.parse(l.wallColor),l.altColor=l.wallColor.adjustLightness(0.8));l.roofColor&&(l.roofColor=Q.parse(l.roofColor));n=l;p=l.footprint;h=void 0;h=k=a=0;for(g=p.length-3;h<g;h+=2)a+=p[h],k+=p[h+1];h=(p.length-2)/2;n.center=[a/h,k/h];l=l.footprint;n=0;for(p=l.length-1;n<p;n+=2)this.n=X(l[n],this.n),this.e=X(l[n+1],this.e),this.s=T(l[n],this.s),this.w=T(l[n+1],this.w)}this.scale(H);clearInterval(N);K=
0;ga.render();N=setInterval(function(){K+=0.1;if(1<K){clearInterval(N);K=1;for(var a=0,b=z.rendering.length;a<b;a++)z.rendering[a].isNew=!1}ca.render();c()},33)}},scale:function(a){var d,e,c,j=this.raw,f=[],g,k,h,l,n,p,t=O-a;a=0;for(d=j.length;a<d;a++)if(g=j[a],l=3*(g.height||5)>>t)if(n=3*g.minHeight>>t,!(n>R)){k=g.footprint;p=new la(k.length);e=0;for(c=k.length-1;e<c;e+=2)h=b(k[e],k[e+1]),p[e]=h.x,p[e+1]=h.y;e=p.length/2;c=new ma(e);k=0;h=e-1;var q=void 0,r=void 0,s=void 0,v=void 0,w=[],z=[],C=[];
for(c[k]=c[h]=1;h;){r=0;for(q=k+1;q<h;q++){var s=p[2*q],A=p[2*q+1],B=p[2*k],y=p[2*k+1],E=p[2*h],F=p[2*h+1],u=E-B,x=F-y,D=void 0;if(0!==u||0!==x)D=((s-B)*u+(A-y)*x)/(u*u+x*x),1<D?(B=E,y=F):0<D&&(B+=u*D,y+=x*D);u=s-B;x=A-y;s=u*u+x*x;s>r&&(v=q,r=s)}2<r&&(c[v]=1,w.push(k),z.push(v),w.push(v),z.push(h));k=w.pop();h=z.pop()}for(q=0;q<e;q++)c[q]&&C.push(p[2*q],p[2*q+1]);p=C;8>p.length||(h=b(g.center[0],g.center[1]),e=[h.x,h.y],f.push({footprint:p,height:T(l,R),minHeight:n,wallColor:g.wallColor&&g.wallColor.adjustAlpha(G)+
"",altColor:g.altColor&&g.altColor.adjustAlpha(G)+"",roofColor:g.roofColor&&g.roofColor.adjustAlpha(G)+"",center:e,isNew:g.isNew}))}this.rendering=f}},ca={enabled:!0,context:null,color:new Q(0,0,0),colorStr:this.color+"",date:null,alpha:1,length:0,directionX:0,directionY:0,init:function(a){this.context=a;this.setDate((new Date).setHours(10))},setEnabled:function(a){this.enabled=!!a},render:function(){var b=this.context,d,e,c,j;b.clearRect(0,0,t,B);if(this.enabled&&!(H<D||da))if(d=a(I+w,J+C),d=pa(this.date,
d.latitude,d.longitude),!(0>=d.altitude)){e=1/ia(d.altitude);c=0.4/e;this.directionX=Da(d.azimuth)*e;this.directionY=Ca(d.azimuth)*e;this.color.a=c;j=this.color+"";var g,f,k,h,l,n,p=I,y=J,q,r,s,v,u,x,A=[];b.beginPath();d=0;for(e=z.rendering.length;d<e;d++){f=z.rendering[d];r=!1;k=f.footprint;q=[];c=0;for(g=k.length-1;c<g;c+=2)q[c]=l=k[c]-p,q[c+1]=n=k[c+1]-y,r||(r=0<l&&l<t&&0<n&&n<B);if(r){k=f.isNew?f.height*K:f.height;f.minHeight&&(h=f.isNew?f.minHeight*K:f.minHeight);l=null;c=0;for(g=q.length-3;c<
g;c+=2)n=q[c],s=q[c+1],r=q[c+2],v=q[c+3],u=this.project(n,s,k),x=this.project(r,v,k),f.minHeight&&(s=this.project(n,s,h),v=this.project(r,v,h),n=s.x,s=s.y,r=v.x,v=v.y),(r-n)*(u.y-s)>(u.x-n)*(v-s)?(1===l&&b.lineTo(n,s),l=0,c||b.moveTo(n,s),b.lineTo(r,v)):(0===l&&b.lineTo(u.x,u.y),l=1,c||b.moveTo(u.x,u.y),b.lineTo(x.x,x.y));b.closePath();A.push(q)}}b.fillStyle=j;b.fill();b.globalCompositeOperation="destination-out";b.beginPath();d=0;for(e=A.length;d<e;d++){h=A[d];b.moveTo(h[0],h[1]);c=2;for(g=h.length;c<
g;c+=2)b.lineTo(h[c],h[c+1]);b.lineTo(h[0],h[1]);b.closePath()}b.fillStyle="#00ff00";b.fill();b.globalCompositeOperation="source-over"}},project:function(a,b,d){return{x:a+this.directionX*d,y:b+this.directionY*d}},setDate:function(a){this.date=a;this.render()}},ga={context:null,maxHeight:8,init:function(a){this.context=a},render:function(){var a=this.context;a.clearRect(0,0,t,B);if(!(H<D||da)){var b,d,c,e,f,g,j,h=I,l=J,n,p;a.beginPath();b=0;for(d=z.rendering.length;b<d;b++){c=z.rendering[b];p=!1;
f=c.footprint;n=[];c=0;for(e=f.length-1;c<e;c+=2)n[c]=g=f[c]-h,n[c+1]=j=f[c+1]-l,p||(p=0<g&&g<t&&0<j&&j<B);if(p){c=0;for(e=n.length-3;c<e;c+=2)p=n[c],f=n[c+1],c?a.lineTo(p,f):a.moveTo(p,f);a.closePath()}}a.fillStyle=ba;a.strokeStyle=aa;a.stroke();a.fill()}},getMaxHeight:function(){return this.maxHeight}};this.setStyle=function(a){a=a||{};if(a.color||a.wallColor)P=Q.parse(a.color||a.wallColor),M=P.adjustAlpha(G)+"",x=P.adjustLightness(0.8),aa=x.adjustAlpha(G)+"",V=P.adjustLightness(1.2),ba=V.adjustAlpha(G)+
"";a.roofColor&&(V=Q.parse(a.roofColor),ba=V.adjustAlpha(G)+"");void 0!==a.shadows&&ca.setEnabled(a.shadows);j();return this};this.setCamOffset=function(a,b){ea=w+a;fa=B+b};this.setMaxZoom=function(a){O=a};this.setDate=function(a){ca.setDate(a);return this};this.appendTo=function(a){return U.init(a)};this.loadData=function(a){z.load(a);return this};this.setData=function(a){z.set(a);return this};this.onMoveEnd=function(){var b=a(I,J),c=a(I+t,J+B);j();(b[Z]>z.n||b[$]<z.w||c[Z]<z.s||c[$]>z.e)&&z.update()};
this.onZoomEnd=function(a){da=!1;e(a.zoom);z.update();j()};this.onZoomStart=function(){da=!0;j()};this.setOrigin=function(a,b){I=a;J=b};this.setSize=function(a,b){t=a;B=b;w=t/2<<0;C=B/2<<0;ea=w;fa=B;W=t/(1.5/(window.devicePixelRatio||1))/ia(45)<<0;U.setSize(t,B);R=W-50};this.setZoom=e;this.render=c};j.VERSION="0.1.8a";j.ATTRIBUTION='&copy; <a href="http://osmbuildings.org">OSM Buildings</a>';j.OSM_XAPI_URL="http://overpass-api.de/api/interpreter?data=[out:json];(way[%22building%22]({s},{w},{n},{e});node(w);way[%22building:part%22=%22yes%22]({s},{w},{n},{e});node(w);relation[%22building%22]({s},{w},{n},{e});way(r);node(w););out;";
return j}();
L.BuildingsLayer=L.Class.extend({map:null,osmb:null,container:null,blockMoveEvent:null,lastX:0,lastY:0,initialize:function(d){L.Util.setOptions(this,d)},onMove:function(){var d=L.DomUtil.getPosition(this.map._mapPane);this.osmb.setCamOffset(this.lastX-d.x,this.lastY-d.y);this.osmb.render()},onMoveEnd:function(){if(this.blockMoveEvent)this.blockMoveEvent=!1;else{var d=L.DomUtil.getPosition(this.map._mapPane),E=this.map.getPixelOrigin();this.lastX=d.x;this.lastY=d.y;this.container.style.left=-d.x+"px";
this.container.style.top=-d.y+"px";this.osmb.setCamOffset(0,0);this.osmb.setSize(this.map._size.x,this.map._size.y);this.osmb.setOrigin(E.x-d.x,E.y-d.y);this.osmb.onMoveEnd()}},onZoomStart:function(){this.osmb.onZoomStart()},onZoomEnd:function(){var d=L.DomUtil.getPosition(this.map._mapPane),E=this.map.getPixelOrigin();this.osmb.setOrigin(E.x-d.x,E.y-d.y);this.osmb.onZoomEnd({zoom:this.map._zoom});this.blockMoveEvent=!0},addTo:function(d){d.addLayer(this);return this},onAdd:function(d){this.map=d;
d=this.map._panes.overlayPane;this.osmb?d.appendChild(this.container):(this.osmb=new OSMBuildings,this.container=this.osmb.appendTo(d),this.osmb.maxZoom=this.map._layersMaxZoom);d=L.DomUtil.getPosition(this.map._mapPane);var E=this.map.getPixelOrigin();this.osmb.setSize(this.map._size.x,this.map._size.y);this.osmb.setOrigin(E.x-d.x,E.y-d.y);this.osmb.setZoom(this.map._zoom);this.container.style.left=-d.x+"px";this.container.style.top=-d.y+"px";this.map.on({move:this.onMove,moveend:this.onMoveEnd,
zoomstart:this.onZoomStart,zoomend:this.onZoomEnd},this);this.map.attributionControl.addAttribution(OSMBuildings.ATTRIBUTION);this.osmb.render()},onRemove:function(d){d.attributionControl.removeAttribution(OSMBuildings.ATTRIBUTION);d.off({move:this.onMove,moveend:this.onMoveEnd,zoomstart:this.onZoomStart,zoomend:this.onZoomEnd},this);this.container.parentNode.removeChild(this.container)},setStyle:function(d){return this.osmb.setStyle(d)},setDate:function(d){return this.osmb.setDate(d)},load:function(d){this.osmb.loadData(d)},
geoJSON:function(d){this.osmb.setData(d)}});
