var OSMBuildings=function(){function d(a,b){var f=a[0]-b[0],e=a[1]-b[1];return f*f+e*e}function K(a){for(var b=0,f=0,e=0,g=a.length-3;e<g;e+=2)b+=a[e],f+=a[e+1];a=(a.length-2)/2;return[b/a<<0,f/a<<0]}function Ba(a){var b,f,e,g,d=0,m,h;m=0;for(h=a.length-3;m<h;m+=2)b=a[m],f=a[m+1],e=a[m+2],g=a[m+3],d+=b*g-e*f;if("CW"===(0<d/2?"CW":"CCW"))return a;b=[];for(f=a.length-2;0<=f;f-=2)b.push(a[f],a[f+1]);return b}var Ca=Ca||Array,Da=Da||Array,h=Math,Ma=h.exp,Na=h.log,Oa=h.sin,Pa=h.cos,ua=h.tan,Qa=h.atan,
oa=h.min,va=h.max,Ea=document,T,ba=function(a){var b,f,e;if(0===a.s)b=f=e=a.l;else{e=0.5>a.l?a.l*(1+a.s):a.l+a.s-a.l*a.s;var g=2*a.l-e;a.h/=360;b=U(g,e,a.h+1/3);f=U(g,e,a.h);e=U(g,e,a.h-1/3)}return new w(255*b<<0,255*f<<0,255*e<<0,a.a)},U=function(a,b,f){0>f&&(f+=1);1<f&&(f-=1);return f<1/6?a+6*(b-a)*f:0.5>f?b:f<2/3?a+6*(b-a)*(2/3-f):a},w=function(a,b,f,e){this.r=a;this.g=b;this.b=f;this.a=4>arguments.length?1:e},h=w.prototype;h.toString=function(){return"rgba("+[this.r<<0,this.g<<0,this.b<<0,this.a.toFixed(2)].join()+
")"};h.setLightness=function(a){var b=w.toHSLA(this);b.l*=a;b.l=Math.min(1,Math.max(0,b.l));return ba(b)};h.setAlpha=function(a){return new w(this.r,this.g,this.b,this.a*a)};w.parse=function(a){var b;a+="";if(~a.indexOf("#")&&(b=a.match(/^#?(\w{2})(\w{2})(\w{2})(\w{2})?$/)))return new w(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),b[4]?parseInt(b[4],16)/255:1);if(b=a.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/))return new w(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),b[4]?
parseFloat(b[5]):1);if(b=a.match(/hsla?\(([\d.]+)\D+([\d.]+)\D+([\d.]+)(\D+([\d.]+))?\)/))return ba({h:parseInt(b[1],10),s:parseFloat(b[2]),l:parseFloat(b[3]),a:b[4]?parseFloat(b[5]):1})};w.toHSLA=function(a){var b=a.r/255,f=a.g/255,e=a.b/255,g=Math.max(b,f,e),d=Math.min(b,f,e),m,h=(g+d)/2,u;if(g===d)m=d=0;else{u=g-d;d=0.5<h?u/(2-g-d):u/(g+d);switch(g){case b:m=(f-e)/u+(f<e?6:0);break;case f:m=(e-b)/u+2;break;case e:m=(b-f)/u+4}m/=6}return{h:360*m,s:d,l:h,a:a.a}};T=w;var Fa,h=Math,E=h.PI,k=h.sin,
x=h.cos,ca=h.tan,da=h.asin,ea=h.atan2,F=E/180,N=23.4397*F;Fa=function(a,b,f){f=F*-f;b*=F;a=a.valueOf()/864E5-0.5+2440588-2451545;var e=F*(357.5291+0.98560028*a),g=F*(1.9148*k(e)+0.02*k(2*e)+3E-4*k(3*e)),g=e+g+102.9372*F+E,e=da(k(0)*x(N)+x(0)*k(N)*k(g)),g=ea(k(g)*x(N)-ca(0)*k(N),x(g));f=F*(280.16+360.9856235*a)-f-g;return{altitude:da(k(b)*k(e)+x(b)*x(e)*x(f)),azimuth:ea(k(f),x(f)*k(b)-ca(e)*x(b))-E/2}};var Ga,H=function(a){var b=parseFloat(a);return~a.indexOf("m")?b<<0:~a.indexOf("yd")?b*Ra<<0:~a.indexOf("ft")?
b*Ha<<0:~a.indexOf("'")?(a=a.split("'"),a[0]*Ha+a[1]*Sa<<0):b<<0},z=function(a){a=a.toLowerCase();return"#"===a[0]?a:Ta[a]||null},v=function(a){a=a.toLowerCase();return"#"===a[0]?a:Ua[Va[a]||a]||null},Ia=function(a){return(a=a.tags)&&!a.landuse&&(a.building||a["building:part"])&&(!a.layer||0<=a.layer)},Ja=function(a){if(a){for(var b=[],f,e=0,g=a.length;e<g;e++)f=V[a[e]],b.push(f[0],f[1]);b[b.length-2]!==b[0]&&b[b.length-1]!==b[1]&&b.push(b[0],b[1]);if(!(8>b.length))return b}},fa=function(a){var b=
0,f=0;a.height&&(b=H(a.height));!b&&a["building:height"]&&(b=H(a["building:height"]));!b&&a.levels&&(b=a.levels*O<<0);!b&&a["building:levels"]&&(b=a["building:levels"]*O<<0);a.min_height&&(f=H(a.min_height));!f&&a["building:min_height"]&&(f=H(a["building:min_height"]));!f&&a.min_level&&(f=a.min_level*O<<0);!f&&a["building:min_level"]&&(f=a["building:min_level"]*O<<0);var e,g;a["building:material"]&&(e=v(a["building:material"]));a["building:facade:material"]&&(e=v(a["building:facade:material"]));a["building:cladding"]&&
(e=v(a["building:cladding"]));a["building:color"]&&(e=z(a["building:color"]));a["building:colour"]&&(e=z(a["building:colour"]));a["roof:material"]&&(g=v(a["roof:material"]));a["building:roof:material"]&&(g=v(a["building:roof:material"]));a["roof:color"]&&(g=z(a["roof:color"]));a["roof:colour"]&&(g=z(a["roof:colour"]));a["building:roof:color"]&&(g=z(a["building:roof:color"]));a["building:roof:colour"]&&(g=z(a["building:roof:colour"]));return{height:b,minHeight:f,wallColor:e,roofColor:g}},Ka=function(a,
b,f){a={id:a,footprint:Ba(f)};b.height&&(a.height=b.height);b.minHeight&&(a.minHeight=b.minHeight);b.wallColor&&(a.wallColor=b.wallColor);b.roofColor&&(a.roofColor=b.roofColor);X.push(a)},Ra=0.9144,Ha=0.3048,Sa=0.0254,O=3,Ta={black:"#000000",white:"#ffffff",brown:"#8b4513",green:"#00ff7f",grey:"#bebebe",gray:"#bebebe",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",yellow:"#ffff00",red:"#ff0000",blue:"#0000ff"},Va={asphalt:"tar_paper",bitumen:"tar_paper",block:"stone",bricks:"brick",glas:"glass",glassfront:"glass",
grass:"plants",masonry:"stone",granite:"stone",panels:"panel",paving_stones:"stone",plastered:"plaster",rooftiles:"roof_tiles",roofingfelt:"tar_paper",sandstone:"stone",sheet:"canvas",sheets:"canvas",shingle:"tar_paper",shingles:"tar_paper",slates:"slate",steel:"metal",tar:"tar_paper",tent:"canvas",thatch:"plants",tile:"roof_tiles",tiles:"roof_tiles"},Ua={brick:"#cc7755",bronze:"#ffeecc",canvas:"#fff8f0",concrete:"#999999",copper:"#a0e0d0",glass:"#e8f8f8",gold:"#ffcc00",plants:"#009933",metal:"#aaaaaa",
panel:"#fff8f0",plaster:"#999999",roof_tiles:"#f08060",silver:"#cccccc",slate:"#666666",stone:"#996666",tar_paper:"#333333",wood:"#deb887"},V,Y,X;Ga=function(a){V={};Y={};X=[];for(var b,f=0,e=a.length;f<e;f++)switch(b=a[f],b.type){case "node":V[b.id]=[b.lat,b.lon];break;case "way":var g=void 0,d=void 0;Ia(b)?(g=fa(b.tags),(d=Ja(b.nodes))&&Ka(b.id,g,d)):(g=b.tags)&&(!g.highway&&!g.railway&&!g.landuse)&&(Y[b.id]=b);break;case "relation":var h=g=g=void 0,d=void 0;if(Ia(b)&&("multipolygon"===b.tags.type||
"building"===b.tags.type)){a:{for(var g=b.members,d=void 0,h=0,k=g.length;h<k;h++)if(d=g[h],"way"===d.type&&"outer"===d.role){g=d;break a}g=void 0}if(g&&(b=fa(b.tags),g=Y[g.ref]))if(h=fa(g.tags),d=Ja(g.nodes)){k=void 0;for(k in b)h[k]||(h[k]=b[k]);Ka(g.id,h,d)}}}return X};var ga=Math.PI,La=ga/2,Wa=ga/4,Xa=180/ga,Ya=256,Za="latitude",$a="longitude",h=function(){function a(a,b){var c={};a/=F;b/=F;c[Za]=0>=b?90:1<=b?-90:Xa*(2*Qa(Ma(ga*(1-2*b)))-La);c[$a]=360*(1===a?1:(a%1+1)%1)-180;return c}function b(a,
b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,ab){return b[ab]||a})}function f(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&c.status&&!(200>c.status||299<c.status)&&b&&c.responseText&&b(JSON.parse(c.responseText))};c.open("GET",a);c.send(null);return c}function e(){ha.render();pa.render();g()}function g(){A.clearRect(0,0,u,y);if(!(P<H||ia)){var a,b,c,f,e,g,wa,C,j,n=pa.MAX_HEIGHT,p=[ja+B,ka+I],Q,q,l,r,t,k;D.renderItems.sort(function(a,b){return d(b.center,p)/
b.height-d(a.center,p)/a.height});a=0;for(b=D.renderItems.length;a<b;a++)if(e=D.renderItems[a],!(e.height<=n)){q=!1;g=e.footprint;Q=[];c=0;for(f=g.length-1;c<f;c+=2)Q[c]=C=g[c]-B,Q[c+1]=j=g[c+1]-I,q||(q=0<C&&C<u&&0<j&&j<y);if(q){c=1>e.scale?e.height*e.scale:e.height;g=Z/(Z-c);e.minHeight&&(c=1>e.scale?e.minHeight*e.scale:e.minHeight,wa=Z/(Z-c));C=[];c=0;for(f=Q.length-3;c<f;c+=2)j=Q[c],l=Q[c+1],q=Q[c+2],r=Q[c+3],t=m(j,l,g),k=m(q,r,g),e.minHeight&&(l=m(j,l,wa),r=m(q,r,wa),j=l.x,l=l.y,q=r.x,r=r.y),
(q-j)*(t.y-l)>(t.x-j)*(r-l)&&(A.fillStyle=j<q&&l<r||j>q&&l>r?e.altColor||la:e.wallColor||v,h([q,r,j,l,t.x,t.y,k.x,k.y])),C[c]=t.x,C[c+1]=t.y;A.fillStyle=e.roofColor||ma;A.strokeStyle=e.altColor||la;h(C,!0)}}}}function h(a,b){if(a.length){A.beginPath();A.moveTo(a[0],a[1]);for(var c=2,e=a.length;c<e;c+=2)A.lineTo(a[c],a[c+1]);A.closePath();b&&A.stroke();A.fill()}}function m(a,b,c){return{x:(a-ja)*c+ja<<0,y:(b-ka)*c+ka<<0}}function k(a){P=a;F=Ya<<P;a=P;var b=H,c=O;a=oa(va(a,b),c);M=1-oa(va(0+0.3*((a-
b)/(c-b)),0),0.3);v=J.setAlpha(M)+"";la=z.setAlpha(M)+"";ma=$.setAlpha(M)+""}var u=0,y=0,w=0,x=0,B=0,I=0,P,F,A,J=new T(200,190,180),z=J.setLightness(0.8),$=J.setLightness(1.2),v=J+"",la=z+"",ma=$+"",N,M=1,H=15,O=20,U,ja,ka,Z,ia,E=new Date,aa={},V={add:function(a,b){aa[a]={data:b,time:Date.now()}},get:function(a){return aa[a]&&aa[a].data},purge:function(){E.setMinutes(E.getMinutes()-5);for(var a in aa)aa[a].time<E&&delete aa[a]}},D,fa=function(a){return function(b){X(b,a)}},X=function(a,b){if(a){var c;
if("FeatureCollection"===a.type){c=a.features;var e,f,d,g,h=[],j,n,p,k,q,l,r,t;e=0;for(f=c.length;e<f;e++)if(j=c[e],"Feature"===j.type&&(n=j.geometry,j=j.properties,"LineString"===n.type&&(l=p.length-1,p[0][0]===p[l][0]&&p[0][1]===p[l][1]&&(p=n.coordinates)),"Polygon"===n.type&&(p=n.coordinates),"MultiPolygon"===n.type&&(p=n.coordinates[0]),p)){if(j.color||j.wallColor)k=j.color||j.wallColor;j.roofColor&&(q=j.roofColor);n=p[0];t=[];r=j.height;d=l=0;for(g=n.length;d<g;d++)t.push(n[d][1],n[d][0]),l+=
r||n[d][2]||0;d={id:j.id||t[0]+","+t[1],footprint:Ba(t)};l&&(d.height=l/n.length<<0);j.minHeight&&(d.minHeight=j.minHeight);k&&(d.wallColor=k);q&&(d.roofColor=q);h.push(d)}c=h}else a.osm3s&&(c=Ga(a.elements));b&&V.add(b,c);Y(c,!0)}},Y=function(a,b){var c,d,f,g,h,C,j=[],n,p,k,q,l,r,t,m,s,u=O-P;f=0;for(g=a.length;f<g;f++)if(s=m=t=null,n=a[f],k=3*(n.height||15)>>u)if(q=3*n.minHeight>>u,!(q>U)){p=n.footprint;l=new Ca(p.length);h=0;for(C=p.length-1;h<C;h+=2)c=p[h+1],d=oa(1,va(0,0.5-Na(ua(Wa+La*p[h]/180))/
ga/2)),c=(c/360+0.5)*F<<0,d=d*F<<0,l[h]=c,l[h+1]=d;h=l;C=h.length/2;p=new Da(C);l=0;c=C-1;var w=d=void 0,x=void 0,y=void 0,z=[],A=[],G=[];for(p[l]=p[c]=1;c;){w=0;for(d=l+1;d<c;d++){var x=h[2*d],H=h[2*d+1],v=h[2*l],B=h[2*l+1],I=h[2*c],J=h[2*c+1],R=I-v,S=J-B,E=void 0;if(0!==R||0!==S)E=((x-v)*R+(H-B)*S)/(R*R+S*S),1<E?(v=I,B=J):0<E&&(v+=R*E,B+=S*E);R=x-v;S=H-B;x=R*R+S*S;x>w&&(y=d,w=x)}2<w&&(p[y]=1,z.push(l),A.push(y),z.push(y),A.push(c));l=z.pop();c=A.pop()}for(d=0;d<C;d++)p[d]&&G.push(h[2*d],h[2*d+1]);
l=G;if(!(8>l.length)){if(n.wallColor&&(r=T.parse(n.wallColor)))t=r.setAlpha(M),m=""+t.setLightness(0.8),t=""+t;if(n.roofColor&&(r=T.parse(n.roofColor)))s=""+r.setAlpha(M);j.push({id:n.id,footprint:l,height:oa(k,U),minHeight:q,wallColor:t,altColor:m,roofColor:s,center:K(l)})}}g=0;for(n=j.length;g<n;g++)f=j[g],qa[f.id]||(f.scale=b?0:1,na.renderItems.push(j[g]),qa[f.id]=1);N||(N=setInterval(function(){for(var a,b=!1,c=0,d=D.renderItems.length;c<d;c++)a=D.renderItems[c],1>a.scale&&(a.scale+=0.1,1<a.scale&&
(a.scale=1),b=!0);e();b||(clearInterval(N),N=null)},33))},xa,qa={},na={renderItems:[],load:function(a){xa=a;na.update()},update:function(){if(xa&&!(15>P)){var d=a(B,I),e=a(B+u,I+y),c=0.0075*(d.latitude/0.0075<<0)+0.0075,g=0.015*(e.longitude/0.015<<0)+0.015,e=0.0075*(e.latitude/0.0075<<0),d=0.015*(d.longitude/0.015<<0);V.purge();na.renderItems=[];qa={};for(var h,k,m;e<=c;e+=0.0075)for(h=d;h<=g;h+=0.015)m=e+","+h,(k=V.get(m))?Y(k):f(b(xa,{n:(1E4*(e+0.0075)<<0)/1E4,e:(1E4*(h+0.015)<<0)/1E4,s:(1E4*e<<
0)/1E4,w:(1E4*h<<0)/1E4}),fa(m))}},set:function(a){na.renderItems=[];qa={};X(a)}};D=na;var ha,sa=function(a,b,c){return{x:a+ra.x*c,y:b+ra.y*c}},s,ba=!0,ca=new T(0,0,0),da=null,ra={x:0,y:0},ya={setContext:function(a){s=a;ya.setDate((new Date).setHours(10))},enable:function(a){ba=!!a},render:function(){var b,d,c,e;s.clearRect(0,0,u,y);if(ba&&!(P<H||ia))if(b=a(B+w,I+x),b=Fa(da,b.latitude,b.longitude),!(0>=b.altitude)){d=1/ua(b.altitude);c=0.4/d;ra.x=Pa(b.azimuth)*d;ra.y=Oa(b.azimuth)*d;ca.a=c;e=ca+"";
var f,g,h,k,j,n,p,m,q,l,r,t,v=[];s.beginPath();b=0;for(d=D.renderItems.length;b<d;b++){g=D.renderItems[b];m=!1;h=g.footprint;p=[];c=0;for(f=h.length-1;c<f;c+=2)p[c]=j=h[c]-B,p[c+1]=n=h[c+1]-I,m||(m=0<j&&j<u&&0<n&&n<y);if(m){h=1>g.scale?g.height*g.scale:g.height;g.minHeight&&(k=1>g.scale?g.minHeight*g.scale:g.minHeight);j=null;c=0;for(f=p.length-3;c<f;c+=2)n=p[c],q=p[c+1],m=p[c+2],l=p[c+3],r=sa(n,q,h),t=sa(m,l,h),g.minHeight&&(q=sa(n,q,k),l=sa(m,l,k),n=q.x,q=q.y,m=l.x,l=l.y),(m-n)*(r.y-q)>(r.x-n)*
(l-q)?(1===j&&s.lineTo(n,q),j=0,c||s.moveTo(n,q),s.lineTo(m,l)):(0===j&&s.lineTo(r.x,r.y),j=1,c||s.moveTo(r.x,r.y),s.lineTo(t.x,t.y));s.closePath();v.push(p)}}s.fillStyle=e;s.fill();s.globalCompositeOperation="destination-out";s.beginPath();b=0;for(d=v.length;b<d;b++){k=v[b];s.moveTo(k[0],k[1]);c=2;for(f=k.length;c<f;c+=2)s.lineTo(k[c],k[c+1]);s.lineTo(k[0],k[1]);s.closePath()}s.fillStyle="#00ff00";s.fill();s.globalCompositeOperation="source-over"}},setDate:function(a){da=a;ya.render()}};ha=ya;var pa,
G,ea={MAX_HEIGHT:8,setContext:function(a){G=a},render:function(){G.clearRect(0,0,u,y);if(!(P<H||ia)){var a,b,c,d,e,f,g,h,j;G.beginPath();a=0;for(b=D.renderItems.length;a<b;a++)if(c=D.renderItems[a],!(c.height>ea.MAX_HEIGHT)){j=!1;e=c.footprint;h=[];c=0;for(d=e.length-1;c<d;c+=2)h[c]=f=e[c]-B,h[c+1]=g=e[c+1]-I,j||(j=0<f&&f<u&&0<g&&g<y);if(j){c=0;for(d=h.length-3;c<d;c+=2)j=h[c],e=h[c+1],c?G.lineTo(j,e):G.moveTo(j,e);G.closePath()}}G.fillStyle=ma;G.strokeStyle=la;G.stroke();G.fill()}}};pa=ea;var za,
Aa=function(){var a=Ea.createElement("CANVAS");a.style.webkitTransform="translate3d(0,0,0)";a.style.imageRendering="optimizeSpeed";a.style.position="absolute";a.style.left=0;a.style.top=0;var b=a.getContext("2d");b.lineCap="round";b.lineJoin="round";b.lineWidth=1;b.mozImageSmoothingEnabled=!1;b.webkitImageSmoothingEnabled=!1;ta.push(a);W.appendChild(a);return b},W=Ea.createElement("DIV");W.style.pointerEvents="none";W.style.position="absolute";W.style.left=0;W.style.top=0;var ta=[];ha.setContext(Aa());
pa.setContext(Aa());A=Aa();za={appendTo:function(a){a.appendChild(W);return W},setSize:function(a,b){for(var c=0,d=ta.length;c<d;c++)ta[c].width=a,ta[c].height=b}};this.setStyle=function(a){a=a||{};if(a.color||a.wallColor)J=T.parse(a.color||a.wallColor),v=J.setAlpha(M)+"",z=J.setLightness(0.8),la=z.setAlpha(M)+"",$=J.setLightness(1.2),ma=$.setAlpha(M)+"";a.roofColor&&($=T.parse(a.roofColor),ma=$.setAlpha(M)+"");void 0!==a.shadows&&ha.enable(a.shadows);e();return this};this.setCamOffset=function(a,
b){ja=w+a;ka=y+b};this.setMaxZoom=function(a){O=a};this.setDate=function(a){ha.setDate(a);return this};this.appendTo=function(a){return za.appendTo(a)};this.loadData=function(a){D.load(a);return this};this.setData=function(a){D.set(a);return this};this.onMoveEnd=function(){e();D.update()};this.onZoomEnd=function(a){ia=!1;k(a.zoom);D.update();e()};this.onZoomStart=function(){ia=!0;e()};this.setOrigin=function(a,b){B=a;I=b};this.setSize=function(a,b){u=a;y=b;w=u/2<<0;x=y/2<<0;ja=w;ka=y;Z=u/(1.5/(window.devicePixelRatio||
1))/ua(45)<<0;za.setSize(u,y);U=Z-50};this.setZoom=k;this.render=g};h.VERSION="0.1.8a";h.ATTRIBUTION='&copy; <a href="http://osmbuildings.org">OSM Buildings</a>';h.OSM_XAPI_URL="http://overpass-api.de/api/interpreter?data=[out:json];(way[%22building%22]({s},{w},{n},{e});node(w);way[%22building:part%22=%22yes%22]({s},{w},{n},{e});node(w);relation[%22building%22]({s},{w},{n},{e});way(r);node(w););out;";return h}();
L.BuildingsLayer=L.Class.extend({map:null,osmb:null,container:null,blockMoveEvent:null,lastX:0,lastY:0,initialize:function(d){L.Util.setOptions(this,d)},onMove:function(){var d=L.DomUtil.getPosition(this.map._mapPane);this.osmb.setCamOffset(this.lastX-d.x,this.lastY-d.y);this.osmb.render()},onMoveEnd:function(){if(this.blockMoveEvent)this.blockMoveEvent=!1;else{var d=L.DomUtil.getPosition(this.map._mapPane),K=this.map.getPixelOrigin();this.lastX=d.x;this.lastY=d.y;this.container.style.left=-d.x+"px";
this.container.style.top=-d.y+"px";this.osmb.setCamOffset(0,0);this.osmb.setSize(this.map._size.x,this.map._size.y);this.osmb.setOrigin(K.x-d.x,K.y-d.y);this.osmb.onMoveEnd()}},onZoomStart:function(){this.osmb.onZoomStart()},onZoomEnd:function(){var d=L.DomUtil.getPosition(this.map._mapPane),K=this.map.getPixelOrigin();this.osmb.setOrigin(K.x-d.x,K.y-d.y);this.osmb.onZoomEnd({zoom:this.map._zoom});this.blockMoveEvent=!0},addTo:function(d){d.addLayer(this);return this},onAdd:function(d){this.map=d;
d=this.map._panes.overlayPane;this.osmb?d.appendChild(this.container):(this.osmb=new OSMBuildings,this.container=this.osmb.appendTo(d),this.osmb.maxZoom=this.map._layersMaxZoom);d=L.DomUtil.getPosition(this.map._mapPane);var K=this.map.getPixelOrigin();this.osmb.setSize(this.map._size.x,this.map._size.y);this.osmb.setOrigin(K.x-d.x,K.y-d.y);this.osmb.setZoom(this.map._zoom);this.container.style.left=-d.x+"px";this.container.style.top=-d.y+"px";this.map.on({move:this.onMove,moveend:this.onMoveEnd,
zoomstart:this.onZoomStart,zoomend:this.onZoomEnd},this);this.map.attributionControl.addAttribution(OSMBuildings.ATTRIBUTION);this.osmb.render()},onRemove:function(d){d.attributionControl.removeAttribution(OSMBuildings.ATTRIBUTION);d.off({move:this.onMove,moveend:this.onMoveEnd,zoomstart:this.onZoomStart,zoomend:this.onZoomEnd},this);this.container.parentNode.removeChild(this.container)},setStyle:function(d){this.osmb.setStyle(d);return this},setDate:function(d){this.osmb.setDate(d);return this},
load:function(d){this.osmb.loadData(d);return this},geoJSON:function(d){this.osmb.setData(d);return this}});
