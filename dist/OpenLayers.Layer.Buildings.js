var OSMBuildings=function(){function h(a,b){var d=a[0]-b[0],f=a[1]-b[1];return d*d+f*f}function L(a){for(var b=0,d=0,f=0,e=a.length-3;f<e;f+=2)b+=a[f],d+=a[f+1];a=(a.length-2)/2;return[b/a<<0,d/a<<0]}function r(a){var b,d,f,e,h=0,l,g;l=0;for(g=a.length-3;l<g;l+=2)b=a[l],d=a[l+1],f=a[l+2],e=a[l+3],h+=b*e-f*d;if("CW"===(0<h/2?"CW":"CCW"))return a;b=[];for(d=a.length-2;0<=d;d-=2)b.push(a[d],a[d+1]);return b}var X=X||Array,Ca=Ca||Array,g=Math,La=g.exp,Ma=g.log,Na=g.sin,Oa=g.cos,va=g.tan,Pa=g.atan,pa=
g.min,wa=g.max,Da=document,S,ca=function(a){var b,d,f;if(0===a.s)b=d=f=a.l;else{f=0.5>a.l?a.l*(1+a.s):a.l+a.s-a.l*a.s;var e=2*a.l-f;a.h/=360;b=T(e,f,a.h+1/3);d=T(e,f,a.h);f=T(e,f,a.h-1/3)}return new w(255*b<<0,255*d<<0,255*f<<0,a.a)},T=function(a,b,d){0>d&&(d+=1);1<d&&(d-=1);return d<1/6?a+6*(b-a)*d:0.5>d?b:d<2/3?a+6*(b-a)*(2/3-d):a},w=function(a,b,d,f){this.r=a;this.g=b;this.b=d;this.a=4>arguments.length?1:f},g=w.prototype;g.toString=function(){return"rgba("+[this.r<<0,this.g<<0,this.b<<0,this.a.toFixed(2)].join()+
")"};g.setLightness=function(a){var b=w.toHSLA(this);b.l*=a;b.l=Math.min(1,Math.max(0,b.l));return ca(b)};g.setAlpha=function(a){return new w(this.r,this.g,this.b,this.a*a)};w.parse=function(a){var b;a+="";if(~a.indexOf("#")&&(b=a.match(/^#?(\w{2})(\w{2})(\w{2})(\w{2})?$/)))return new w(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),b[4]?parseInt(b[4],16)/255:1);if(b=a.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/))return new w(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),b[4]?
parseFloat(b[5]):1);if(b=a.match(/hsla?\(([\d.]+)\D+([\d.]+)\D+([\d.]+)(\D+([\d.]+))?\)/))return ca({h:parseInt(b[1],10),s:parseFloat(b[2]),l:parseFloat(b[3]),a:b[4]?parseFloat(b[5]):1})};w.toHSLA=function(a){var b=a.r/255,d=a.g/255,f=a.b/255,e=Math.max(b,d,f),h=Math.min(b,d,f),l,g=(e+h)/2,u;if(e===h)l=h=0;else{u=e-h;h=0.5<g?u/(2-e-h):u/(e+h);switch(e){case b:l=(d-f)/u+(d<f?6:0);break;case d:l=(f-b)/u+2;break;case f:l=(b-d)/u+4}l/=6}return{h:360*l,s:h,l:g,a:a.a}};S=w;var Ea,g=Math,E=g.PI,v=g.sin,
x=g.cos,da=g.tan,ea=g.asin,fa=g.atan2,F=E/180,N=23.4397*F;Ea=function(a,b,d){d=F*-d;b*=F;a=a.valueOf()/864E5-0.5+2440588-2451545;var f=F*(357.5291+0.98560028*a),e=F*(1.9148*v(f)+0.02*v(2*f)+3E-4*v(3*f)),e=f+e+102.9372*F+E,f=ea(v(0)*x(N)+x(0)*v(N)*v(e)),e=fa(v(e)*x(N)-da(0)*v(N),x(e));d=F*(280.16+360.9856235*a)-d-e;return{altitude:ea(v(b)*v(f)+x(b)*x(f)*x(d)),azimuth:fa(v(d),x(d)*v(b)-da(f)*x(b))-E/2}};var Fa,H=function(a){var b=parseFloat(a);return~a.indexOf("m")?b<<0:~a.indexOf("yd")?b*Qa<<0:~a.indexOf("ft")?
b*Ga<<0:~a.indexOf("'")?(a=a.split("'"),a[0]*Ga+a[1]*Ra<<0):b<<0},A=function(a){a=a.toLowerCase();return"#"===a[0]?a:Sa[a]||null},z=function(a){a=a.toLowerCase();return"#"===a[0]?a:Ta[Ua[a]||a]||null},Ha=function(a){return(a=a.tags)&&!a.landuse&&(a.building||a["building:part"])&&(!a.layer||0<=a.layer)},Ia=function(a){if(a){for(var b=[],d,f=0,e=a.length;f<e;f++)d=U[a[f]],b.push(d[0],d[1]);b[b.length-2]!==b[0]&&b[b.length-1]!==b[1]&&b.push(b[0],b[1]);if(!(8>b.length))return b}},ga=function(a){var b=
0,d=0;a.height&&(b=H(a.height));!b&&a["building:height"]&&(b=H(a["building:height"]));!b&&a.levels&&(b=a.levels*O<<0);!b&&a["building:levels"]&&(b=a["building:levels"]*O<<0);a.min_height&&(d=H(a.min_height));!d&&a["building:min_height"]&&(d=H(a["building:min_height"]));!d&&a.min_level&&(d=a.min_level*O<<0);!d&&a["building:min_level"]&&(d=a["building:min_level"]*O<<0);var f,e;a["building:material"]&&(f=z(a["building:material"]));a["building:facade:material"]&&(f=z(a["building:facade:material"]));a["building:cladding"]&&
(f=z(a["building:cladding"]));a["building:color"]&&(f=A(a["building:color"]));a["building:colour"]&&(f=A(a["building:colour"]));a["roof:material"]&&(e=z(a["roof:material"]));a["building:roof:material"]&&(e=z(a["building:roof:material"]));a["roof:color"]&&(e=A(a["roof:color"]));a["roof:colour"]&&(e=A(a["roof:colour"]));a["building:roof:color"]&&(e=A(a["building:roof:color"]));a["building:roof:colour"]&&(e=A(a["building:roof:colour"]));return{height:b,minHeight:d,wallColor:f,roofColor:e}},Ja=function(a,
b,d){a={id:a,footprint:r(d)};b.height&&(a.height=b.height);b.minHeight&&(a.minHeight=b.minHeight);b.wallColor&&(a.wallColor=b.wallColor);b.roofColor&&(a.roofColor=b.roofColor);Y.push(a)},Qa=0.9144,Ga=0.3048,Ra=0.0254,O=3,Sa={black:"#000000",white:"#ffffff",brown:"#8b4513",green:"#00ff7f",grey:"#bebebe",gray:"#bebebe",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",yellow:"#ffff00",red:"#ff0000",blue:"#0000ff"},Ua={asphalt:"tar_paper",bitumen:"tar_paper",block:"stone",bricks:"brick",glas:"glass",glassfront:"glass",
grass:"plants",masonry:"stone",granite:"stone",panels:"panel",paving_stones:"stone",plastered:"plaster",rooftiles:"roof_tiles",roofingfelt:"tar_paper",sandstone:"stone",sheet:"canvas",sheets:"canvas",shingle:"tar_paper",shingles:"tar_paper",slates:"slate",steel:"metal",tar:"tar_paper",tent:"canvas",thatch:"plants",tile:"roof_tiles",tiles:"roof_tiles"},Ta={brick:"#cc7755",bronze:"#ffeecc",canvas:"#fff8f0",concrete:"#999999",copper:"#a0e0d0",glass:"#e8f8f8",gold:"#ffcc00",plants:"#009933",metal:"#aaaaaa",
panel:"#fff8f0",plaster:"#999999",roof_tiles:"#f08060",silver:"#cccccc",slate:"#666666",stone:"#996666",tar_paper:"#333333",wood:"#deb887"},U,Z,Y;Fa=function(a){U={};Z={};Y=[];for(var b,d=0,f=a.length;d<f;d++)switch(b=a[d],b.type){case "node":U[b.id]=[b.lat,b.lon];break;case "way":var e=void 0,h=void 0;Ha(b)?(e=ga(b.tags),(h=Ia(b.nodes))&&Ja(b.id,e,h)):(e=b.tags)&&(!e.highway&&!e.railway&&!e.landuse)&&(Z[b.id]=b);break;case "relation":var g=e=e=void 0,h=void 0;if(Ha(b)&&("multipolygon"===b.tags.type||
"building"===b.tags.type)){a:{for(var e=b.members,h=void 0,g=0,r=e.length;g<r;g++)if(h=e[g],"way"===h.type&&"outer"===h.role){e=h;break a}e=void 0}if(e&&(b=ga(b.tags),e=Z[e.ref]))if(g=ga(e.tags),h=Ia(e.nodes)){r=void 0;for(r in b)g[r]||(g[r]=b[r]);Ja(e.id,g,h)}}}return Y};var ha=Math.PI,Ka=ha/2,Va=ha/4,Wa=180/ha,Xa=256,Ya="latitude",Za="longitude",g=function(){function a(a,b){var c={};a/=F;b/=F;c[Ya]=0>=b?90:1<=b?-90:Wa*(2*Pa(La(ha*(1-2*b)))-Ka);c[Za]=360*(1===a?1:(a%1+1)%1)-180;return c}function b(a,
b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,$a){return b[$a]||a})}function d(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&c.status&&!(200>c.status||299<c.status)&&b&&c.responseText&&b(JSON.parse(c.responseText))};c.open("GET",a);c.send(null);return c}function f(){ia.render();qa.render();e()}function e(){B.clearRect(0,0,u,y);if(!(P<H||ja)){var a,b,c,d,f,e,xa,t,j,m=qa.MAX_HEIGHT,p=[ka+C,la+J],I,q,k,s,V,n;D.renderItems.sort(function(a,b){return h(b.center,p)/
b.height-h(a.center,p)/a.height});a=0;for(b=D.renderItems.length;a<b;a++)if(f=D.renderItems[a],!(f.height<=m)){q=!1;e=f.footprint;I=[];c=0;for(d=e.length-1;c<d;c+=2)I[c]=t=e[c]-C,I[c+1]=j=e[c+1]-J,q||(q=0<t&&t<u&&0<j&&j<y);if(q){c=1>f.scale?f.height*f.scale:f.height;e=$/($-c);f.minHeight&&(c=1>f.scale?f.minHeight*f.scale:f.minHeight,xa=$/($-c));t=[];c=0;for(d=I.length-3;c<d;c+=2)j=I[c],k=I[c+1],q=I[c+2],s=I[c+3],V=l(j,k,e),n=l(q,s,e),f.minHeight&&(k=l(j,k,xa),s=l(q,s,xa),j=k.x,k=k.y,q=s.x,s=s.y),
(q-j)*(V.y-k)>(V.x-j)*(s-k)&&(B.fillStyle=j<q&&k<s||j>q&&k>s?f.altColor||ma:f.wallColor||z,g([q,s,j,k,V.x,V.y,n.x,n.y])),t[c]=V.x,t[c+1]=V.y;B.fillStyle=f.roofColor||na;B.strokeStyle=f.altColor||ma;g(t,!0)}}}}function g(a,b){if(a.length){B.beginPath();B.moveTo(a[0],a[1]);for(var c=2,f=a.length;c<f;c+=2)B.lineTo(a[c],a[c+1]);B.closePath();b&&B.stroke();B.fill()}}function l(a,b,c){return{x:(a-ka)*c+ka<<0,y:(b-la)*c+la<<0}}function v(a){P=a;F=Xa<<P;a=P;var b=H,c=O;a=pa(wa(a,b),c);M=1-pa(wa(0+0.3*((a-
b)/(c-b)),0),0.3);z=K.setAlpha(M)+"";ma=A.setAlpha(M)+"";na=aa.setAlpha(M)+""}var u=0,y=0,w=0,x=0,C=0,J=0,P,F,B,K=new S(200,190,180),A=K.setLightness(0.8),aa=K.setLightness(1.2),z=K+"",ma=A+"",na=aa+"",N,M=1,H=15,O=20,T,ka,la,$,ja,E=new Date,ba={},U={add:function(a,b){ba[a]={data:b,time:Date.now()}},get:function(a){return ba[a]&&ba[a].data},purge:function(){E.setMinutes(E.getMinutes()-5);for(var a in ba)ba[a].time<E&&delete ba[a]}},D,ga=function(a){return function(b){Y(b,a)}},Y=function(a,b){if(a){var c;
if("FeatureCollection"===a.type){c=a.features;var f,d,e,h,g=[],j,m,p,I,q,k,s,n;f=0;for(d=c.length;f<d;f++)if(j=c[f],"Feature"===j.type&&(m=j.geometry,j=j.properties,"LineString"===m.type&&(k=p.length-1,p[0][0]===p[k][0]&&p[0][1]===p[k][1]&&(p=m.coordinates)),"Polygon"===m.type&&(p=m.coordinates),"MultiPolygon"===m.type&&(p=m.coordinates[0]),p)){if(j.color||j.wallColor)I=j.color||j.wallColor;j.roofColor&&(q=j.roofColor);m=p[0];n=[];s=j.height;e=k=0;for(h=m.length;e<h;e++)n.push(m[e][1],m[e][0]),k+=
s||m[e][2]||0;e={id:j.id||n[0]+","+n[1],footprint:r(n)};k&&(e.height=k/m.length<<0);j.minHeight&&(e.minHeight=j.minHeight);I&&(e.wallColor=I);q&&(e.roofColor=q);g.push(e)}c=g}else a.osm3s&&(c=Fa(a.elements));b&&U.add(b,c);Z(c,!0)}},Z=function(a,b){var c,d,e,h,g,t,j=[],m,p,n,q,k,s,l,r,u,v=O-P;e=0;for(h=a.length;e<h;e++)if(u=r=l=null,m=a[e],n=3*(m.height||15)>>v)if(q=3*m.minHeight>>v,!(q>T)){p=m.footprint;k=new X(p.length);g=0;for(t=p.length-1;g<t;g+=2)c=p[g+1],d=pa(1,wa(0,0.5-Ma(va(Va+Ka*p[g]/180))/
ha/2)),c=(c/360+0.5)*F<<0,d=d*F<<0,k[g]=c,k[g+1]=d;g=k;t=g.length/2;p=new Ca(t);k=0;c=t-1;var w=d=void 0,x=void 0,y=void 0,A=[],B=[],G=[];for(p[k]=p[c]=1;c;){w=0;for(d=k+1;d<c;d++){var x=g[2*d],H=g[2*d+1],z=g[2*k],C=g[2*k+1],J=g[2*c],K=g[2*c+1],Q=J-z,R=K-C,E=void 0;if(0!==Q||0!==R)E=((x-z)*Q+(H-C)*R)/(Q*Q+R*R),1<E?(z=J,C=K):0<E&&(z+=Q*E,C+=R*E);Q=x-z;R=H-C;x=Q*Q+R*R;x>w&&(y=d,w=x)}2<w&&(p[y]=1,A.push(k),B.push(y),A.push(y),B.push(c));k=A.pop();c=B.pop()}for(d=0;d<t;d++)p[d]&&G.push(g[2*d],g[2*d+1]);
k=G;if(!(8>k.length)){if(m.wallColor&&(s=S.parse(m.wallColor)))l=s.setAlpha(M),r=""+l.setLightness(0.8),l=""+l;if(m.roofColor&&(s=S.parse(m.roofColor)))u=""+s.setAlpha(M);j.push({id:m.id,footprint:k,height:pa(n,T),minHeight:q,wallColor:l,altColor:r,roofColor:u,center:L(k)})}}h=0;for(m=j.length;h<m;h++)e=j[h],ra[e.id]||(e.scale=b?0:1,oa.renderItems.push(j[h]),ra[e.id]=1);N||(N=setInterval(function(){for(var a,b=!1,c=0,d=D.renderItems.length;c<d;c++)a=D.renderItems[c],1>a.scale&&(a.scale+=0.1,1<a.scale&&
(a.scale=1),b=!0);f();b||(clearInterval(N),N=null)},33))},ya,ra={},oa={renderItems:[],load:function(a){ya=a;oa.update()},update:function(){if(ya&&!(15>P)){var e=a(C,J),f=a(C+u,J+y),c=0.0075*(e.latitude/0.0075<<0)+0.0075,h=0.015*(f.longitude/0.015<<0)+0.015,f=0.0075*(f.latitude/0.0075<<0),e=0.015*(e.longitude/0.015<<0);U.purge();oa.renderItems=[];ra={};for(var g,n,l;f<=c;f+=0.0075)for(g=e;g<=h;g+=0.015)l=f+","+g,(n=U.get(l))?Z(n):d(b(ya,{n:(1E4*(f+0.0075)<<0)/1E4,e:(1E4*(g+0.015)<<0)/1E4,s:(1E4*f<<
0)/1E4,w:(1E4*g<<0)/1E4}),ga(l))}},set:function(a){oa.renderItems=[];ra={};Y(a)}};D=oa;var ia,ta=function(a,b,c){return{x:a+sa.x*c,y:b+sa.y*c}},n,ca=!0,da=new S(0,0,0),ea=null,sa={x:0,y:0},za={setContext:function(a){n=a;za.setDate((new Date).setHours(10))},enable:function(a){ca=!!a},render:function(){var b,d,c,f;n.clearRect(0,0,u,y);if(ca&&!(P<H||ja))if(b=a(C+w,J+x),b=Ea(ea,b.latitude,b.longitude),!(0>=b.altitude)){d=1/va(b.altitude);c=0.4/d;sa.x=Oa(b.azimuth)*d;sa.y=Na(b.azimuth)*d;da.a=c;f=da+"";
var e,g,h,t,j,m,p,l,q,k,s,r,v=[];n.beginPath();b=0;for(d=D.renderItems.length;b<d;b++){g=D.renderItems[b];l=!1;h=g.footprint;p=[];c=0;for(e=h.length-1;c<e;c+=2)p[c]=j=h[c]-C,p[c+1]=m=h[c+1]-J,l||(l=0<j&&j<u&&0<m&&m<y);if(l){h=1>g.scale?g.height*g.scale:g.height;g.minHeight&&(t=1>g.scale?g.minHeight*g.scale:g.minHeight);j=null;c=0;for(e=p.length-3;c<e;c+=2)m=p[c],q=p[c+1],l=p[c+2],k=p[c+3],s=ta(m,q,h),r=ta(l,k,h),g.minHeight&&(q=ta(m,q,t),k=ta(l,k,t),m=q.x,q=q.y,l=k.x,k=k.y),(l-m)*(s.y-q)>(s.x-m)*
(k-q)?(1===j&&n.lineTo(m,q),j=0,c||n.moveTo(m,q),n.lineTo(l,k)):(0===j&&n.lineTo(s.x,s.y),j=1,c||n.moveTo(s.x,s.y),n.lineTo(r.x,r.y));n.closePath();v.push(p)}}n.fillStyle=f;n.fill();n.globalCompositeOperation="destination-out";n.beginPath();b=0;for(d=v.length;b<d;b++){t=v[b];n.moveTo(t[0],t[1]);c=2;for(e=t.length;c<e;c+=2)n.lineTo(t[c],t[c+1]);n.lineTo(t[0],t[1]);n.closePath()}n.fillStyle="#00ff00";n.fill();n.globalCompositeOperation="source-over"}},setDate:function(a){ea=a;za.render()}};ia=za;var qa,
G,fa={MAX_HEIGHT:8,setContext:function(a){G=a},render:function(){G.clearRect(0,0,u,y);if(!(P<H||ja)){var a,b,c,d,e,f,g,h,j;G.beginPath();a=0;for(b=D.renderItems.length;a<b;a++)if(c=D.renderItems[a],!(c.height>fa.MAX_HEIGHT)){j=!1;e=c.footprint;h=[];c=0;for(d=e.length-1;c<d;c+=2)h[c]=f=e[c]-C,h[c+1]=g=e[c+1]-J,j||(j=0<f&&f<u&&0<g&&g<y);if(j){c=0;for(d=h.length-3;c<d;c+=2)j=h[c],e=h[c+1],c?G.lineTo(j,e):G.moveTo(j,e);G.closePath()}}G.fillStyle=na;G.strokeStyle=ma;G.stroke();G.fill()}}};qa=fa;var Aa,
Ba=function(){var a=Da.createElement("CANVAS");a.style.webkitTransform="translate3d(0,0,0)";a.style.imageRendering="optimizeSpeed";a.style.position="absolute";a.style.left=0;a.style.top=0;var b=a.getContext("2d");b.lineCap="round";b.lineJoin="round";b.lineWidth=1;b.mozImageSmoothingEnabled=!1;b.webkitImageSmoothingEnabled=!1;ua.push(a);W.appendChild(a);return b},W=Da.createElement("DIV");W.style.pointerEvents="none";W.style.position="absolute";W.style.left=0;W.style.top=0;var ua=[];ia.setContext(Ba());
qa.setContext(Ba());B=Ba();Aa={appendTo:function(a){a.appendChild(W);return W},setSize:function(a,b){for(var c=0,d=ua.length;c<d;c++)ua[c].width=a,ua[c].height=b}};this.setStyle=function(a){a=a||{};if(a.color||a.wallColor)K=S.parse(a.color||a.wallColor),z=K.setAlpha(M)+"",A=K.setLightness(0.8),ma=A.setAlpha(M)+"",aa=K.setLightness(1.2),na=aa.setAlpha(M)+"";a.roofColor&&(aa=S.parse(a.roofColor),na=aa.setAlpha(M)+"");void 0!==a.shadows&&ia.enable(a.shadows);f();return this};this.setCamOffset=function(a,
b){ka=w+a;la=y+b};this.setMaxZoom=function(a){O=a};this.setDate=function(a){ia.setDate(a);return this};this.appendTo=function(a){return Aa.appendTo(a)};this.loadData=function(a){D.load(a);return this};this.setData=function(a){D.set(a);return this};this.onMoveEnd=function(){f();D.update()};this.onZoomEnd=function(a){ja=!1;v(a.zoom);D.update();f()};this.onZoomStart=function(){ja=!0;f()};this.setOrigin=function(a,b){C=a;J=b};this.setSize=function(a,b){u=a;y=b;w=u/2<<0;x=y/2<<0;ka=w;la=y;$=u/(1.5/(window.devicePixelRatio||
1))/va(45)<<0;Aa.setSize(u,y);T=$-50};this.setZoom=v;this.render=e};g.VERSION="0.1.8a";g.ATTRIBUTION='&copy; <a href="http://osmbuildings.org">OSM Buildings</a>';g.OSM_XAPI_URL="http://overpass-api.de/api/interpreter?data=[out:json];(way[%22building%22]({s},{w},{n},{e});node(w);way[%22building:part%22=%22yes%22]({s},{w},{n},{e});node(w);relation[%22building%22]({s},{w},{n},{e});way(r);node(w););out;";return g}();
OpenLayers.Layer.Buildings=OpenLayers.Class(OpenLayers.Layer,{CLASS_NAME:"OpenLayers.Layer.Buildings",name:"OSM Buildings",attribution:OSMBuildings.ATTRIBUTION,isBaseLayer:!1,alwaysInRange:!0,dxSum:0,dySum:0,initialize:function(h){h=h||{};h.projection="EPSG:900913";OpenLayers.Layer.prototype.initialize.call(this,this.name,h)},setOrigin:function(){var h=this.map.getLonLatFromPixel(new OpenLayers.Pixel(0,0)),L=this.map.resolution,r=this.maxExtent,X=Math.round((h.lon-r.left)/L),h=Math.round((r.top-h.lat)/
L);this.osmb.setOrigin(X,h)},setMap:function(h){this.map||OpenLayers.Layer.prototype.setMap.call(this,h);this.osmb||(this.osmb=new OSMBuildings,this.container=this.osmb.appendTo(this.div));this.osmb.setSize(this.map.size.w,this.map.size.h);this.osmb.setZoom(this.map.zoom);this.setOrigin()},removeMap:function(h){this.container.parentNode.removeChild(this.container);OpenLayers.Layer.prototype.removeMap.call(this,h)},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.call(this);this.osmb.onResize({width:this.map.size.w,
height:this.map.size.h})},moveTo:function(h,L,r){h=OpenLayers.Layer.prototype.moveTo.call(this,h,L,r);if(!r){r=parseInt(this.map.layerContainerDiv.style.left,10);var X=parseInt(this.map.layerContainerDiv.style.top,10);this.div.style.left=-r+"px";this.div.style.top=-X+"px"}this.setOrigin();this.dySum=this.dxSum=0;this.osmb.setCamOffset(this.dxSum,this.dySum);if(L)this.osmb.onZoomEnd({zoom:this.map.zoom});else this.osmb.onMoveEnd();return h},moveByPx:function(h,L){this.dxSum+=h;this.dySum+=L;var r=
OpenLayers.Layer.prototype.moveByPx.call(this,h,L);this.osmb.setCamOffset(this.dxSum,this.dySum);this.osmb.render();return r},setStyle:function(h){this.osmb.setStyle(h);return this},setDate:function(h){this.osmb.setDate(h);return this},load:function(h){this.osmb.loadData(h);return this},geoJSON:function(h){this.osmb.setData(h);return this}});
