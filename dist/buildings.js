(function(t){function ka(a){e=t.document.createElement("canvas");e.style.webkitTransform="translate3d(0,0,0)";e.style.position="absolute";e.style.pointerEvents="none";e.style.left=0;e.style.top=0;a.appendChild(e);j=e.getContext("2d");j.lineCap="round";j.lineJoin="round";j.lineWidth=1;try{j.mozImageSmoothingEnabled=!1}catch(c){}}function u(a,c){var b={},a=a/O,c=c/O;b[x]=0>=c?90:1<=c?-90:la*(2*ma(na(y*(1-2*c)))-ba);b[r]=360*(1===a?1:(a%1+1)%1)-180;return b}function oa(a,c){return a.replace(/\{ *([\w_]+) *\}/g,
function(a,d){return c[d]||""})}function pa(a,c){var b=new XMLHttpRequest;b.onreadystatechange=function(){4!==b.readyState||!b.status||200>b.status||299<b.status||b.responseText&&c(JSON.parse(b.responseText))};b.open("GET",a);b.send(null);return b}function I(){if(P&&!(n<J)){var a=u(A-z,B-v),c=u(A+z,B+v);K&&K.abort();K=pa(oa(P,{w:a[r],n:a[x],e:c[r],s:c[x],z:n}),qa)}}function ca(a,c){var c=c||[],b=a[0]?a:a.features,d,w,h,f;if(b){d=0;for(f=b.length;d<f;d++)ca(b[d],c);return c}"Feature"===a.type&&(d=
a.geometry,w=a.properties);if("Polygon"==d.type&&w.height){b=d.coordinates[0];h=[];d=0;for(f=b.length;d<f;d++)h.push(b[d][1]),h.push(b[d][0]);c.push([w.height,ra(h)])}return c}function da(a,c,b){for(var d,w,h=[],f,g,i,j=Q-c,l=0,k=a.length;l<k;l++){f=a[l][0];g=a[l][1];i=new Int32Array(g.length);for(var e=0,o=g.length-1;e<o;e+=2){d=g[e+1];w=ea<<c;var n=R(1,sa(0,0.5-ta(ua(va+ba*g[e]/180))/y/2));d=~~((d/360+0.5)*w);w=~~(n*w);i[e]=d;i[e+1]=w}h[l]=[R(f>>j,fa),i,b]}return h}function ra(a){for(var c=a.length,
b=maxS=a[0],d=maxW=a[1],g,h,f=0;f<c-1;f+=2)if(a[f+1]<maxW?(maxW=a[f+1],g=f):a[f+1]>d&&(d=a[f+1],h=f),a[f]>b)b=a[f],NI=f;b=g-NI;h-=NI;0>b&&(b+=c);0>h&&(h+=c);if("CW"===(b>h?"CW":"CCW"))return a;c=[];for(h=a.length-2;0<=h;h-=2)c.push(a[h]),c.push(a[h+1]);return c}function ga(a,c){z=a;v=c;C=~~(z/2);L=~~(v/2);E=C;F=v;e.width=z;e.height=v}function ha(a,c){A=a;B=c}function ia(a){n=a;O=ea<<n;M=1-0.3*(n-J)/(Q-J)}function wa(){S=!0;s()}function qa(a){var c,b,d,e=[],h=0,f=0;K=null;if(a&&a.meta.z===n){d=a.meta;
b=a.data;if(k&&g&&k.z===d.z){h=k.x-d.x;f=k.y-d.y;a=0;for(c=g.length;a<c;a++)e[a]=g[a][G][0]+h+","+(g[a][G][1]+f)}k=d;g=[];a=0;for(c=b.length;a<c;a++)g[a]=b[a],g[a][N]=R(g[a][N],fa),d=g[a][G][0]+","+g[a][G][1],g[a][T]=!(e&&~e.indexOf(d));ja()}}function ja(){D=0;clearInterval(U);U=setInterval(function(){D+=0.1;if(1<D){clearInterval(U);D=1;for(var a=0,c=g.length;a<c;a++)g[a][T]=0}s()},33)}function s(){var a,c,b,d;j.clearRect(0,0,z,v);if(k&&g&&!(n<J||S)){var e=V(W,M),h=V(X,M),f=V(Y,M);j.strokeStyle=f;
var s,i,q,l,x=A-C-k.x,y=B-L-k.y,o,r,m,p,H,t,u,f=0;for(s=g.length;f<s;f++){a=g[f];l=!1;c=a[G];o=new Int32Array(c.length);i=0;for(q=c.length-1;i<q;i+=2)o[i]=b=c[i]-x,o[i+1]=d=c[i+1]-y,l||(l=0<b&&b<z&&0<d&&d<v);if(l){j.fillStyle=e;i=a[T]?a[N]*D:a[N];l=Z/(Z-i);r=new Int32Array(o.length-2);m=[];i=0;for(q=o.length-1-2;i<q;i+=2)p=o[i],H=o[i+1],t=o[i+2],u=o[i+3],b=~~((p-E)*l+E),d=~~((H-F)*l+F),a=~~((t-E)*l+E),c=~~((u-F)*l+F),(t-p)*(d-H)>(b-p)*(u-H)?(m.length||(m.unshift(H),m.unshift(p),m.push(b),m.push(d)),
m.unshift(u),m.unshift(t),m.push(a),m.push(c)):($(m),m=[]),r[i]=b,r[i+1]=d;$(m);j.fillStyle=h;$(r,aa)}}}}function $(a,c){j.beginPath();j.moveTo(a[0],a[1]);for(var b=2,d=a.length;b<d;b+=2)j.lineTo(a[b],a[b+1]);j.closePath();c&&j.stroke();j.fill()}function V(a,c){var b=a.match(/rgba?\((\d+),(\d+),(\d+)(,([\d.]+))?\)/);return"rgba("+[b[1],b[2],b[3],b[4]?c*b[5]:c].join()+")"}t.Int32Array=t.Int32Array||Array;var na=Math.exp,ta=Math.log,ua=Math.tan,ma=Math.atan,R=Math.min,sa=Math.max,y=Math.PI,ba=y/2,va=
y/4,la=180/y,x="latitude",r="longitude",N=0,G=1,T=2,z=0,v=0,C=0,L=0,A=0,B=0,n,O,K,e,j,P,aa,W="rgb(200,190,180)",X="rgb(250,240,230)",Y="rgb(145,140,135)",p,k,g,M=1,D=1,U,ea=256,J=14,Q,E=C,F=v,Z=400,fa=Z-50,S=!1,q=t.OSMBuildings=function(a){this.addTo(a)};q.prototype.VERSION="0.1a";q.prototype.render=function(){if(this.map)return s(),this};q.prototype.setStyle=function(a){if(this.map)return a=a||{},aa=void 0!==a.strokeRoofs?a.strokeRoofs:aa,W=a.wallColor||W,X=a.roofColor||X,Y=a.strokeColor||Y,this};
q.prototype.setData=function(a){if(this.map)return a?(p=ca(a),k={n:90,w:-180,s:-90,e:180,x:0,y:0,z:n},g=da(p,n,!0),ja()):(p=null,s()),this};q.prototype.loadData=function(a){if(this.map)return P=a,I(),this};(function(a){a.VERSION+="-leaflet-patch";a.addTo=function(a){function b(){var b=a._size.divideBy(2);return a._getTopLeftPoint().add(b)}this.map=a;ka(document.querySelector(".leaflet-control-container"));Q=a._layersMaxZoom;ga(a._size.x,a._size.y);var d=b();ha(d.x,d.y);ia(a._zoom);var e;window.addEventListener("resize",
function(){e=setTimeout(function(){clearTimeout(e);ga(a._size.x,a._size.y);s();I()},100)},!1);a.on({move:function(){var a=b();ha(a.x,a.y);s()},moveend:function(){b();var a=u(A-C,B-L),c=u(A+C,B+L);k&&(a[x]>k.n||a[r]<k.w||c[x]<k.s||c[r]>k.e)&&I()},zoomstart:wa,zoomend:function(){var b=a._zoom;S=!1;ia(b);p?(g=da(p,n),s()):I()}});a.attributionControl.addAttribution('Buildings &copy; <a href="http://osmbuildings.org">OSM Buildings</a>');return this};a.removeFrom=function(a){a.attributionControl.removeAttribution('Buildings &copy; <a href="http://osmbuildings.org">OSM Buildings</a>');
a.off({});e.parentNode.removeChild(e);this.map=null;return this}})(q.prototype)})(this);
