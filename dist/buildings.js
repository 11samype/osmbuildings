var OSMBuildings=function(ca){function da(e,d){return e.replace(/\{ *([\w_]+) *\}/g,function(e,a){return d[a]||""})}function ea(e,d){var g=new XMLHttpRequest;g.onreadystatechange=function(){4!==g.readyState||!g.status||200>g.status||299<g.status||g.responseText&&d(JSON.parse(g.responseText))};g.open("GET",e);g.send(null);return g}function Z(e,d,g){void 0===g&&(g=[]);var a=e[0]?e:e.features,c,f,s,n=d?1:0,j=d?0:1;if(a){e=0;for(c=a.length;e<c;e++)Z(a[e],d,g);return g}"Feature"===e.type&&(c=e.geometry,
f=e.properties);if("Polygon"==c.type){a=c.coordinates[0];d=[];e=s=0;for(c=a.length;e<c;e++)d.push(a[e][n]),d.push(a[e][j]),s+=a[e][2]||0;if(s){n=[];n[A]=~~(s/a.length);j=z;var l=0,h,q;h=0;for(q=d.length-3;h<q;h+=2)e=d[h],c=d[h+1],a=d[h+2],s=d[h+3],l+=e*s-a*c;if("CW"!==(0<l/2?"CW":"CCW")){e=[];for(c=d.length-2;0<=c;c-=2)e.push(d[c]),e.push(d[c+1]);d=e}n[j]=d;f.color&&(f=o.parse(f.color),n[B]=[f,f.adjustLightness(0.2)]);g.push(n)}}return g}var M=M||Array,fa=Math.exp,ga=Math.log,ha=Math.tan,ia=Math.atan,
S=Math.min,ja=Math.max,o=function(){function e(a,c,f){0>f&&(f+=1);1<f&&(f-=1);return f<1/6?a+6*(c-a)*f:0.5>f?c:f<2/3?a+6*(c-a)*(2/3-f):a}function d(a,c,f,e){this.r=a;this.g=c;this.b=f;this.a=4>arguments.length?1:e}var g=d.prototype;g.toString=function(){return"rgba("+[this.r,this.g,this.b,this.a].join()+")"};g.adjustLightness=function(a){var c=o.toHSLA(this);c.l+=a;c.l=Math.min(1,Math.max(0,c.l));var f,d;if(0==c.s)a=f=d=c.l;else{d=0.5>c.l?c.l*(1+c.s):c.l+c.s-c.l*c.s;var g=2*c.l-d,a=e(g,d,c.h+1/3);
f=e(g,d,c.h);d=e(g,d,c.h-1/3)}return new o(~~(255*a),~~(255*f),~~(255*d),c.a)};g.adjustAlpha=function(a){return new o(this.r,this.g,this.b,this.a*a)};d.parse=function(a){if(~a.indexOf("#"))return a=a.match(/^#?(\w{2})(\w{2})(\w{2})$/),new o(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));a=a.match(/rgba?\((\d+)\D+(\d+)\D+(\d+)(\D+([\d.]+))?\)/);return new o(a[1],a[2],a[3],a[4]?a[5]:1)};d.toHSLA=function(a){var c=a.r/255,d=a.g/255,e=a.b/255,g=Math.max(c,d,e),j=Math.min(c,d,e),l,h=(g+j)/2,q;
if(g==j)l=j=0;else{q=g-j;j=0.5<h?q/(2-g-j):q/(g+j);switch(g){case c:l=(d-e)/q+(d<e?6:0);break;case d:l=(e-c)/q+2;break;case e:l=(c-d)/q+4}l/=6}return{h:l,s:j,l:h,a:a.a}};return d}(),u=Math.PI,$=u/2,ka=u/4,la=180/u,ma=256,N=14,T=400,aa=T-50,v="latitude",w="longitude",A=0,z=1,B=2,O=3;return function(){function e(b){i=ca.document.createElement("canvas");i.style.webkitTransform="translate3d(0,0,0)";i.style.position="absolute";i.style.pointerEvents="none";i.style.left=0;i.style.top=0;i.style.imageRendering=
"optimizeSpeed";b.appendChild(i);k=i.getContext("2d");k.lineCap="round";k.lineJoin="round";k.lineWidth=1;try{k.mozImageSmoothingEnabled=!1}catch(a){}}function d(b,a){var c={},b=b/C,a=a/C;c[v]=0>=a?90:1<=a?-90:la*(2*ia(fa(u*(1-2*a)))-$);c[w]=360*(1===b?1:(b%1+1)%1)-180;return c}function g(){if(U&&!(y<N)){var b=d(H-t,I-V),a=d(H+D+t,I+x+V);P&&P.abort();P=ea(da(U,{w:b[w],n:b[v],e:a[w],s:a[v],z:y}),j)}}function a(b,a){var c,d,e=[],g,f,h,m,i,k,j,l=W-y;g=0;for(f=b.length;g<f;g++){i=b[g];k=i[z];j=new M(k.length);
h=0;for(m=k.length-1;h<m;h+=2)c=k[h+1],d=S(1,ja(0,0.5-ga(ha(ka+$*k[h]/180))/u/2)),c=~~((c/360+0.5)*C),d=~~(d*C),j[h]=c,j[h+1]=d;e[g]=[];e[g][A]=S(i[A]>>l,aa);e[g][z]=j;e[g][B]=i[B];e[g][O]=a}return e}function c(b,a){D=b;x=a;t=~~(D/2);V=~~(x/2);E=t;F=x;i.width=D;i.height=x}function f(b,a){H=b;I=a}function s(b){y=b;C=ma<<y;J=1-0.3*(y-N)/(W-N)}function n(){X=!0;h()}function j(b){var a,c,d,e=[],g=0,f=0;P=null;if(b&&b.meta.z===y){d=b.meta;c=b.data;if(p&&m&&p.z===d.z){g=p.x-d.x;f=p.y-d.y;b=0;for(a=m.length;b<
a;b++)e[b]=m[b][z][0]+g+","+(m[b][z][1]+f)}p=d;m=[];b=0;for(a=c.length;b<a;b++)m[b]=c[b],m[b][A]=S(m[b][A],aa),d=m[b][z][0]+","+m[b][z][1],m[b][O]=!(e&&~e.indexOf(d));l()}}function l(){K=0;clearInterval(Y);Y=setInterval(function(){K+=0.1;if(1<K){clearInterval(Y);K=1;for(var b=0,a=m.length;b<a;b++)m[b][O]=0}h()},33)}function h(){var b,a,c,d;k.clearRect(0,0,D,x);if(p&&m&&!(y<N||X)){var e,g,f,h,i,j,l=H-p.x,s=I-p.y,n,o,r,t,u,v,w,C=Q.adjustAlpha(J),G=ba.adjustAlpha(J);R&&(k.strokeStyle=na.adjustAlpha(J)+
"");e=0;for(g=m.length;e<g;e++){i=m[e];d=!1;b=i[z];n=new M(b.length);f=0;for(h=b.length-1;f<h;f+=2)n[f]=a=b[f]-l,n[f+1]=c=b[f+1]-s,d||(d=0<a&&a<D&&0<c&&c<x);if(d){k.fillStyle=(i[B]?i[B][0].adjustAlpha(J):C)+"";f=i[O]?i[A]*K:i[A];j=T/(T-f);o=new M(n.length-2);r=[];f=0;for(h=n.length-3;f<h;f+=2)t=n[f],u=n[f+1],v=n[f+2],w=n[f+3],c=~~((t-E)*j+E),d=~~((u-F)*j+F),b=~~((v-E)*j+E),a=~~((w-F)*j+F),(v-t)*(d-u)>(c-t)*(w-u)?(r.length||(r.unshift(u),r.unshift(t),r.push(c),r.push(d)),r.unshift(w),r.unshift(v),
r.push(b),r.push(a)):(q(r),r=[]),o[f]=c,o[f+1]=d;q(r);k.fillStyle=(i[B]?i[B][1].adjustAlpha(J):G)+"";q(o,R)}}}}function q(b,a){if(b.length){k.beginPath();k.moveTo(b[0],b[1]);for(var c=2,d=b.length;c<d;c+=2)k.lineTo(b[c],b[c+1]);k.closePath();a&&k.stroke();k.fill()}}var D=0,x=0,t=0,V=0,H=0,I=0,y,C,P,i,k,U,R,Q=new o(200,190,180),ba=Q.adjustLightness(0.2),na=new o(145,140,135),G,p,m,J=1,K=1,Y,W=20,E,F,X=!1;this.VERSION="0.1.5a";this.render=function(){this.map&&h();return this};this.setStyle=function(b){this.map&&
(b=b||{},R=void 0!==b.strokeRoofs?b.strokeRoofs:R,b.fillColor&&(Q=o.parse(b.fillColor),ba=Q.adjustLightness(0.2)),h());return this};this.setData=function(b,c){this.map&&(b?(G=Z(b,c),p={n:90,w:-180,s:-90,e:180,x:0,y:0,z:y},m=a(G,!0),l()):(G=null,h()));return this};this.loadData=function(b){this.map&&(U=b,g());return this};this.VERSION+="-leaflet";this.addTo=function(b){b.addLayer(this);return this};this.onAdd=function(b){this.map=b;e(b._panes.overlayPane);W=b._layersMaxZoom;c(b._size.x,b._size.y);
var j=b.getPixelOrigin();f(j.x,j.y);s(b._zoom);var k=0,l=0;b.on({move:function(){var a=L.DomUtil.getPosition(b._mapPane);E=t-(a.x-k);F=x-(a.y-l);h()},moveend:function(){var a=L.DomUtil.getPosition(b._mapPane);k=a.x;l=a.y;i.style.left=-a.x+"px";i.style.top=-a.y+"px";E=t;F=x;c(b._size.x,b._size.y);var e=b.getPixelOrigin();f(e.x-a.x,e.y-a.y);a=d(H,I);e=d(H+D,I+x);p&&(a[v]>p.n||a[w]<p.w||e[v]<p.s||e[w]>p.e)&&g();h()},zoomstart:n,zoomend:function(){var c=b._zoom;X=!1;s(c);G?(m=a(G),h()):g()}});b.options.zoomAnimation&&
(i.className="leaflet-zoom-animated");b.attributionControl.addAttribution('Buildings &copy; <a href="http://osmbuildings.org">OSM Buildings</a>');h()};this.onRemove=function(a){a.attributionControl.removeAttribution('Buildings &copy; <a href="http://osmbuildings.org">OSM Buildings</a>');a.off({move:mapOnMove,moveend:mapOnMoveEnd,zoomstart:n,zoomend:mapOnZoomEnd});i.parentNode.removeChild(i);this.map=null};arguments.length&&this.addTo(arguments[0])}}(this);
